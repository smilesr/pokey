<!DOCTYPE html>
<html lang="en">
  <head>
    <title> Pokemon Table </title>
    <meta charset="utf-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <style>
    .jumbotron {
      text-align: center;
    }
    </style>


  </head>
  <body>
    <div class="container-fluid">
      <div class="jumbotron"> 
        <h1>POKEMON</h1>
              <button type="button" class="btn btn-success">Pick a Pokemon</button>
      </div>

      <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>Name</th>
        <th>Base Experience</th>
        <th>Abilities</th>
        <th>Moves</th>
    </thead>
    <tbody>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>  
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>         
    </tbody>
  </table>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script>
    const butt = document.querySelector('button');
    console.log('global')


    function getPokemon(){
      console.log('run getPokemon')
      let randomNumber = getRandom();
      let httpRequest = new XMLHttpRequest();
      httpRequest.onreadystatechange = function()
       {
        console.log("readystate: " + this.readyState)
        if (this.readyState == 4 && this.status == 200)
          {
            let response = JSON.parse(this.responseText);
            let abilitiesList = findAbilities(response.abilities);
            let pokemonName = response.name;
            ;
            console.log(pokemonName)
          }
        }
        httpRequest.open("GET","http://pokeapi.co/api/v2/pokemon/" + randomNumber, true);
        httpRequest.send();
      
    }
    function findAbilities(abilityObject){
      console.log('run findAbilities')
      let abilitiesList = [];
      abilityObject.forEach(function(x){
        abilitiesList.push(x.ability.name);
      })
      return abilitiesList;
    }
    function getRandom(){
      console.log('run getRandom')
      let min = Math.ceil(1);
      let max = Math.floor(711);
      return Math.floor(Math.random() * (max - min)) + min;
    }
        butt.addEventListener('click', getPokemon);
    </script>
  </body>
</html>